<p-toast position="center"></p-toast>
<div class="header-image-wrapper">
  <div class="bg"></div>
  <div class="mask"></div>
  <div class="header-image-content mh-200">
    <p class="desc">املاک مورد علاقه</p>
  </div>
</div>
<div class="px-3 my-4">
  <div class="theme-container">
    <div class="row m-0 justify-content-center">
      <div class="col-sm-12 site-box mr-0 mr-md-4">
        <div class="row justify-content-center mt-3">
          <div
            class="col-sm-12 align-self-center text-right my-5"
            *ngIf="!isLogged || userType === 'admin'"
          >
            <p class="mb-0">
              لطفا ابتدا
              <a class="pointer" [routerLink]="['/auth']">وارد</a> سایت شوید.
            </p>
          </div>

          <div
            class="col-sm-12 align-self-center text-right my-5"
            *ngIf="isLogged && userType === 'user' && favorites.length === 0"
          >
            <p class="mb-0">هیچ موردی یافت نشد.</p>
          </div>

          <div
            class="item col-xs-12 col-sm-6 col-md-6 col-lg-4 col-xl-4 p-0"
            *ngFor="
              let item of favorites
                | paginate
                  : {
                      itemsPerPage: pageSize,
                      currentPage: page,
                      totalItems: total
                    }
            "
          >
            <div
              class="
                property-card property-item
                m-2
                grid-item
                column-4
                full-width-page
              "
            >
              <div class="thumbnail-section">
                <div class="price-type">
                  <span class="green font-iran-bold">{{ item.priceType }}</span>
                </div>
                <div class="property-status">
                  <span class="green font-iran-bold">{{
                    item.TransactionType[0].title
                  }}</span>
                </div>
                <div class="property-image">
                  <img
                    *ngIf="item.image === null || item.image === ''"
                    src="../../../assets/images/user-default.png"
                    class="w-100"
                    height="200px"
                  />
                  <img
                    *ngIf="item.image !== null || item.image !== ''"
                    [src]="item.image"
                    class="w-100"
                    height="200px"
                  />
                </div>
                <div class="control-icons">
                  <button
                    class="add-to-favorite-button"
                    title="افزودن به علاقه مندی ها"
                    (click)="deleteFavorite(item._id)"
                  >
                    <i class="material-icons mat-icon-sm">favorite</i>
                  </button>
                </div>
              </div>
              <div class="property-content-wrapper">
                <div class="property-content text-right">
                  <div class="content">
                    <h1 class="title">
                      <a (click)="redirectToDetails(item._id)">{{
                        item.title
                      }}</a>
                    </h1>
                    <p class="row address flex-nowrap">
                      <i class="material-icons text-muted">location_on</i>
                      <span>{{ item.state + "، " + item.city }}</span>
                    </p>
                    <div
                      class="row justify-content-center"
                      *ngIf="
                        item.transactionTypeID === '613be86ae83f7824dce7cadb'
                      "
                    >
                      <h3 class="primary-color price">
                        <span>{{ item.price | number }} تومان</span>
                      </h3>
                    </div>

                    <div
                      class="row justify-content-center"
                      *ngIf="
                        item.transactionTypeID !== '613be86ae83f7824dce7cadb'
                      "
                    >
                      <h3 class="primary-color price">
                        <span
                          >{{ item.priceMortgage | number }} تومان -
                          {{ item.priceRent | number }} تومان</span
                        >
                      </h3>
                    </div>

                    <div class="features mt-3">
                      <p>
                        <span>{{ item.area }} متر</span
                        ><span
                          >متراژ<i class="fa fa-arrows" aria-hidden="true"></i>
                        </span>
                      </p>
                      <p>
                        <span>{{ item.age }}</span
                        ><span
                          >سن ملک<i class="fa fa-arrows" aria-hidden="true"></i>
                        </span>
                      </p>
                      <p>
                        <span> {{ item.bath }}</span
                        ><span>حمام<i class="fa fa-bath"></i></span>
                      </p>
                      <p>
                        <span>{{ item.bedroom }}</span>
                        <span
                          >اتاق خواب<i class="fa fa-bed" aria-hidden="true"></i
                        ></span>
                      </p>
                    </div>
                  </div>

                  <div class="actions row justify-content-center mt-3">
                    <div class="col-6 align-self-center">
                      <p class="date mb-0">
                        <i class="material-icons text-muted">date_range</i>
                        <span class="mx-2">{{ item.date }}</span>
                      </p>
                    </div>
                    <div
                      class="col-6 align-self-center d-flex flex-row-reverse"
                    >
                      <a
                        class="white-flat-button"
                        (click)="redirectToDetails(itm._id)"
                        >جزییات</a
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          class="row justify-content-center mt-3 site-card"
          *ngIf="favorites.length > 0"
        >
          <div class="col-md-12 col-sm-12 align-self-center">
            <pagination-controls
              (pageChange)="page = $event"
              class="theme-pagination p-3 text-center"
              previousLabel="قبلی"
              nextLabel="بعدی"
            ></pagination-controls>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
