<p-toast position="center"></p-toast>

<div class="px-3">
  <div class="theme-container">
    <div class="row m-0 py-5 justify-content-center property-detail">
      <div class="col-lg-3 col-md-3 col-sm-12 agent-sec">
        <div class="row m-0">
          <div class="col-xs-12 site-card">
            <div>
              <img [src]="property.Agent[0].image" [alt]="property.title" class="img-fluid w-100" />
            </div>
            <div class="p-3 text-right">
              <h2 class="fw-600">{{ property.Agent[0].fullName }}</h2>
              <span>{{ property.Agent[0].Pethos[0].title}}</span><br />
              <span>سطح: {{ property.Agent[0].AgentLevel[0].level}}</span><br />
              <span>تخصص: {{ property.Agent[0].SubPropertyType[0].title}}</span>
              <p class="mt-3 text-muted text-justify fw-500">
                {{ property.Agent[0].info }}
              </p>
              <p class="row align-self-center d-flex">
                <i class="material-icons primary-color">call</i>
                <span class="mx-2 text-muted fw-500">{{ property.Agent[0].mobile}}</span>
              </p>
              <div class="row pb-3">
                <div class="divider"></div>
              </div>
              <div class="row justify-content-center">
                <div class="col d-flex flex-row-reverse">
                  <a class="green-button" (click)="submitVisitRequest()">
                    درخواست بازدید
                  </a>
                </div>
                <div class="col d-flex">
                  <a class="white-flat-button" (click)="redirectToAgentDetail()">
                    مشاهده پروفایل
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-lg-8 col-md-8 mr-0 mr-md-4">
        <div class="row m-0">
          <div class="col-xs-12 w-100 site-card">
            <div class="justify-content-center row m-0 d-flex flex-row px-2 m-0">
              <div class="col align-self-center text-right">
                <h2 class="text-right rtl">کد: {{ property.code }}</h2>
              </div>
              <div class="col align-self-center text-right">
                <h2 class="text-right rtl"> {{ property.PropertyType[0].title }} / {{ property.SubPropertyType[0].title
                  }} / {{ property.TransactionType[0].title }}</h2>
              </div>
              <div class="col align-self-center text-left d-flex flex-row-reverse">
                <i class="material-icons mat-icon-sm">favorite_border</i>
              </div>
            </div>
            <div class="justify-content-right row m-2 d-flex flex-row px-2 m-0">
              <h2 class="text-right rtl">{{ property.title }}</h2>
            </div>
            <div class="justify-content-center row m-0 d-flex flex-row px-2 m-0">
              <div class="col align-self-center text-right">
                <p class="row flex-nowrap address mb-0">
                  <i class="material-icons text-muted">location_on</i>
                  <span class="fw-500 text-muted">{{
                    property.state + " " + property.city
                    }}</span>
                </p>
              </div>

              <div class="col align-self-center text-left" *ngIf="property.price !==null">
                <h2 class="primary-color price">
                  <span>{{ property.price | number }} تومان</span>
                </h2>
              </div>

              <div class="col align-self-center text-left" *ngIf="property.priceMortgage !== null">
                <h2 class="primary-color price">
                  <span>رهن {{ property.priceMortgage | number }} تومان -
                    اجاره {{ property.priceRent | number }} تومان</span>
                </h2>
              </div>
            </div>
          </div>

          <div class="col-xs-12 site-card w-100 mt-4 p-3" *ngIf="galleryFiles.length > 0">
            <h2 class="text-right fw-500 mb-2">گالری</h2>

            <p-galleria #galleria [value]="galleryFiles" [responsiveOptions]="responsiveOptions" [numVisible]="5"
              [circular]="true" [showItemNavigators]="true">
              <ng-template pTemplate="item" let-item>
                <img [src]="item.previewImageSrc" style="width: 100%; display: block" />
                <button type="button" pButton [icon]="fullScreenIcon()" (click)="toggleFullScreen()"
                  class="fullscreen-button"></button>
              </ng-template>
              <ng-template pTemplate="thumbnail" let-item>
                <div class="p-grid p-nogutter p-justify-center">
                  <img [src]="item.previewImageSrc" style="display: block; width: 150px" />
                </div>
              </ng-template>
            </p-galleria>
          </div>



          <div class="col-xs-12 w-100 mt-4">
            <div class="site-card row m-0 d-flex flex-row py-3 px-2">
              <div class="col-12">
                <h2 class="text-right fw-500 mb-2">جزییات</h2>
              </div>
              <div class="col-sm-12 col-md-6 align-self-center text-right">
                <span>متراژ:</span>
                <span>{{ property.area }} متر</span>
              </div>
              <div class="col-sm-12 col-md-6 align-self-center text-right">
                <span>سن ملک:</span>
                <span>{{ property.age }}</span>
              </div>
              <div class="col-sm-12 col-md-6 align-self-center text-right">
                <span>حمام:</span>
                <span>{{ property.bath }}</span>
              </div>
              <div class="col-sm-12 col-md-6 align-self-center text-right">
                <span>اتاق خواب:</span>
                <span>{{ property.bedroom }}</span>
              </div>
            </div>
          </div>

          <div class="col-xs-12 w-100 mt-4" *ngIf="property.features.length > 0">
            <div class="site-card row m-0 d-flex flex-row py-3 px-2">
              <div class="col-12">
                <h2 class="text-right fw-500 mb-2">ویژگی ها</h2>
              </div>
              <div class="col-sm-12 col-md-4 align-self-center text-right" *ngFor="let item of property.features">
                <i class="material-icons mat-icon-sm primary-color">check</i>
                <span class="mx-2">{{ item.title }}</span>
              </div>
            </div>
          </div>

          <div class="col-xs-12 w-100 mt-3" *ngIf="property.condition.length > 0">
            <div class="site-card row m-0 d-flex flex-row py-3 px-2">
              <div class="col-12">
                <h2 class="text-right fw-500 mb-2">شرایط</h2>
              </div>

              <div class="col-sm-12 col-md-3 align-self-center text-right" *ngFor="let item of property.condition">
                <i class="material-icons mat-icon-sm primary-color">check</i>
                <span class="mx-2">{{ item.title }}</span>
              </div>
            </div>
          </div>

          <div class="col-xs-12 w-100 mt-3" *ngIf="property.exchange.length > 0">
            <div class="site-card row m-0 d-flex flex-row py-3 px-2">
              <div class="col-12">
                <h2 class="text-right fw-500 mb-2">قابل معاوضه با</h2>
              </div>

              <div class="col-sm-12 col-md-3 align-self-center text-right" *ngFor="let item of property.exchange">
                <i class="material-icons mat-icon-sm primary-color">check</i>
                <span class="mx-2">{{ item.title }}</span>
              </div>
            </div>
          </div>

          <div class="col-xs-12 w-100 mt-4">
            <div class="site-card row m-0 d-flex flex-row py-3 px-2">
              <div class="col-12">
                <h2 class="text-right fw-500 mb-2">توضیحات</h2>
              </div>
              <div class="col-sm-12 col-md-12 align-self-center text-right">
                <p>
                  {{ property.detail }}
                </p>
              </div>
            </div>
          </div>
          <div class="col-xs-12 site-card w-100 mt-4 p-3" *ngIf="vrFiles.length > 0">
            <h2 class="text-right fw-500 mb-2">تصاویر داخلی</h2>
            <p-galleria #galleria [value]="vrFiles" [responsiveOptions]="responsiveOptions" [numVisible]="5"
              [circular]="true" [showItemNavigators]="true">
              <ng-template pTemplate="item" let-item>
                <img [src]="item.previewImageSrc" style="width: 100%; display: block" />
                <button type="button" pButton [icon]="fullScreenIcon()" (click)="toggleFullScreen()"
                  class="fullscreen-button"></button>
              </ng-template>
              <ng-template pTemplate="thumbnail" let-item>
                <div class="p-grid p-nogutter p-justify-center">
                  <img [src]="item.previewImageSrc" style="display: block; width: 150px" />
                </div>
              </ng-template>
            </p-galleria>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>